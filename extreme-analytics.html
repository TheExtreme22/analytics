-<!DOCTYPE html>
<html>
<head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M2RNBSN8');</script>
<!-- End Google Tag Manager -->
<script>

// Variables to store the timestamps
var pageLoadTime;

// Common function to reset the dataLayer
function resetDataLayer() {
  // var gtm = window.google_tag_manager['GTM-M2RNBSN8'];
  // gtm.dataLayer.reset();
  window.dataLayer = window.dataLayer || [];
  window.dataLayer.length = 0;
}


function dlButton(elementId, ref, event, action) {
  const element = document.getElementById(elementId);
  if (element) {
    element.addEventListener('click', function() {
      eventTime = new Date().getTime();
      resetDataLayer();
      dataLayer.push({
     'elementId': elementId,
     'ref': ref,
     'event': event,
     'action': action,
     'process_start_time': pageLoadTime, 
     'duration': (eventTime-pageLoadTime)/1000
      });
    });
  }
}

function dlField(elementId, ref, event, category, object, action) {
  const element = document.getElementById(elementId);
  if (element) {
    element.addEventListener('focus', function() {
      const eventTime = new Date().getTime();
      resetDataLayer();
      dataLayer.push({
        'elementId': elementId,
        'ref': ref,
        'event': event,
        'category':category,
        'object': object,
        'action': action,
        'process_start_time': pageLoadTime, 
        'duration': (eventTime - pageLoadTime) / 1000
      });
    });
  }
}

 
function dlPage(elementId, ref, event, action) {
  pageLoadTime = new Date().getTime();
  // This event will trigger on page load
  window.addEventListener('load', function() {
    pageReadyTime = new Date().getTime();
     resetDataLayer();
     dataLayer.push({
     'elementId': elementId,
     'ref': ref,
     'event': event,
     'action': action,
     'process_start_time': pageLoadTime,
    'duration': (pageReadyTime-pageLoadTime)/1000
    });
  });
}

 dlPage('reg-displayed', 'reg/01', 'register', 'displayed');
 
</script>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M2RNBSN8"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

 <p>V1.23 - Clear DL function </p>

<h2>
  STEP 1
</h2>
  <label for="name">Email</label>
  <input type="text" class="register" id="reg-email" name="email" required minlength="8" maxlength="50" size="10" />
  <label for="name">Password</label>
  <input type="text" class="register" id="reg-password" name="password" required minlength="8" maxlength="50" size="10" />

<h2>
  STEP 2
</h2>
  <label for="name">First Name</label>
  <input type="text" class="register" id="reg-first_name" name="first_name" required minlength="8" maxlength="50" size="10" />
  <label for="name">Last Name</label>
  <input type="text" class="register" id="reg-last_name" name="last-name" required minlength="8" maxlength="50" size="10" />
  
</br>
  
<button class="register" id="reg-submit">Submit</button>
<button class="register" id="reg-close">Close</button>
<button class="register" id="reg-login">Log In</button>
<button class="register" id="reg-help">Help</button>
<button class="register" id="reg-success">Success</button>
 
</body>
</html>
