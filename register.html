<!DOCTYPE html>
<html>
<head>
    <title>Registration Form 10</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="tracking.js"></script>
    <script type="text/javascript">
        // INITIALISE TRACKING
        amplitude.init('535a35b01503cd1dc00df9f74f844368', {
            defaultTracking: {
                pageViews: false,
            },
        });
        
        // PAGE DISPLAY TRACKING
        var event_properties = {
            'Feature': 'registration',
            'Id': 'register',
            'Category': 'Step 1',
            'Display Type': 'pageLoad',
        };
        amplitude.track('display', event_properties);
        console.log('Display event fired');

        // FIELD TRACKING
        // Function to track when a form field receives focus
        function trackOnFieldFocus(event) {
            console.log('Field focused');
            var target = event.target;
            // Check if the focused element has a data-track attribute
            if (target.hasAttribute('data-track')) {
                // Extract attributes prefixed with "data-track"
                var trackName = target.getAttribute('data-track');
                var trackContainer = target.getAttribute('data-track-container') || '';
                var trackObject = target.getAttribute('data-track-object') || '';
                var trackCategory = target.getAttribute('data-track-category') || '';

                // Construct event properties object
                var event_properties = {
                    Feature: 'registration',
                    Name: trackName,
                    Container: trackContainer,
                    Object: trackObject,
                    Category: trackCategory
                };

                // Fire amplitude tracking with 'focus' event type
                amplitude.track('focus', event_properties);
                console.log('Tracking event fired:', event_properties);
            }
        }

        // Attach focus event listener to all form fields with data-track attribute
        var formFields = document.querySelectorAll('input[data-track]');
        formFields.forEach(function (formField) {
            formField.addEventListener('focus', trackOnFieldFocus);
            console.log('Event listener attached to form field:', formField);
        });
    </script>
</head>
<body>
<div class="header">
    <img class="logo" src="logo.png" alt="Extreme Betting Logo">
</div>
<div class="progress-bar">
    <div class="progress-bar-inner" style="width: 0;"></div>
</div>
<div class="form-container">
    <form id="register" action="submit_registration.php" method="post">
        <div class="form-step active" id="step-1">
            <h2>Step 1: Account Information</h2>
            <label for="email">Email:</label>
            <input type="email" id="field.email" name="email" data-track="email" data-track-container="register"
                   data-track-object="field" data-track-category="step 1" required>

            <label for="password">Password:</label>
            <input type="password" id="field.password" name="password"
                   data-track="password" data-track-container="register" data-track-object="field"
                   data-track-category="step 1" required>

            <button id="button.step_1.next" type="button" onclick="nextStep(1)">Next</button>
        </div>

    </form>
</div>

<div class="footer">
    <div class="social-links">
        <a id="link.facebook" class="social-link" href="#">Facebook</a>
        <a id="link.twitter" class="social-link" href="#">Twitter</a>
        <a id="link.instagram" class="social-link" href="#">Instagram</a>
    </div>
</div>

<script src="script.js"></script>

</body>
</html>
