<!DOCTYPE html>
<html>
<head>
    <title>Registration Form 7</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="tracking.js"></script>
    <script type="text/javascript">
    // INITIALISE TRACKING
        amplitude.init('535a35b01503cd1dc00df9f74f844368', {
            defaultTracking: {
                pageViews: false,
            },
        });
        
    //PAGE DISPLAY TRACKING
        var event_properties = {
            'Feature': 'registration',
            'Id': 'register',
            'Category': 'Step 1',
            'Display Type': 'pageLoad',
        };
        amplitude.track('display', event_properties);

        
    // FIELD TRACKING
        // Function to track when a form field receives focus
        function trackOnFieldFocus(event) {
            var target = event.target;
            // Check if the focused element has a data-track attribute
            if (target.hasAttribute('data-track')) {
                // Extract attributes prefixed with "data-track"
                var trackAttributes = {};
                for (var i = 0; i < target.attributes.length; i++) {
                    var attribute = target.attributes[i];
                    if (attribute.name.startsWith('data-track')) {
                        var key = attribute.name.replace('data-track-', '');
                        trackAttributes[key.charAt(0).toLowerCase() + key.slice(1)] = attribute.value;
                    }
                }

                // Construct event properties object
                var event_properties = {
                    Feature: trackAttributes.feature || '',
                    Name: trackAttributes.name || '',
                    Container: trackAttributes.container || '',
                    Object: trackAttributes.object || '',
                    Category: trackAttributes.category || ''
                };

                // Fire amplitude tracking with 'click' event type
                amplitude.track('click', event_properties);
            }
        }

        // Attach focus event listener to all form fields with data-track attribute
        var formFields = document.querySelectorAll('input[data-track]');
        formFields.forEach(function (formField) {
            formField.addEventListener('focus', trackOnFieldFocus);
        });
        
    </script>
</head>
<body>
<div class="header">
    <img class="logo" src="logo.png" alt="Extreme Betting Logo">
</div>
<div class="progress-bar">
    <div class="progress-bar-inner" style="width: 0;"></div>
</div>
<div class="form-container">
    <form id="register" action="submit_registration.php" method="post">
        <div class="form-step active" id="step-1">
            <h2>Step 1: Account Information</h2>
            <label for="email">Email:</label>
            <input type="email" id="field.email" name="email" data-track-name="email" data-track-container="register"
                   data-track-object="field" data-track-category="step 1" required>

            <label for="password">Password:</label>
            <input type="password" id="field.password" name="password"
                   data-track-name="password" data-track-container="register" data-track-object="field"
                   data-track-category="step 1" required>

            <button id="button.step_1.next" type="button" onclick="nextStep(1)">Next</button>
        </div>

    </form>
</div>

<div class="footer">
    <div class="social-links">
        <a id="link.facebook" class="social-link" href="#">Facebook</a>
        <a id="link.twitter" class="social-link" href="#">Twitter</a>
        <a id="link.instagram" class="social-link" href="#">Instagram</a>
    </div>
</div>

<script src="script.js"></script>

</body>
</html>
